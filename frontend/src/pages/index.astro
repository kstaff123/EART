---
import Template from "../layouts/template.astro";
---

<Template
  title="Home | Efficient Accessibility Review Tool | Western Washington University"
>
  <p class="text-center text-lg p-8">
    Welcome to the Efficient Accessibility Review Tool (EART). This tool is
    designed to help streamline the consistency of manual accessibility reviews
    in an institutional setting where WCAG conformance is required. Get started
    by entering the URL of the website you want to analyze and then click on the
    "Evaluate" button.
  </p>
  <div class="flex justify-center">
    <form
      class="flex flex-col justify-center"
      id="urlForm"
      action="/"
      method="post"
    >
      <label for="url" class="text-center text-lg p-8">
        Enter the URL of the website you want to analyze:
      </label>
      <input
        type="url"
        id="url"
        name="url"
        class="p-2 border-gray-300 w-full"
        placeholder="https://example.com"
        required
      />
      <button
        type="submit"
        class="p-2 !mb-8 align-center bg-blue-500 w-1/2 text-white rounded-lg hover:bg-blue-600"
      >
        Evaluate
      </button>
    </form>
  </div>
  <div id="results" class="mx-8"></div>
  <script type="module" src="/src/components/AccessibilityResults.js"></script>
</Template>
<script type="module">
  import { getData } from "/fetch.js";

  const form = document.getElementById("urlForm");
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const url = document.getElementById("url").value;
    try {
      const data = await getData(url);
      // dispatch for the chart script to pick up
      window.dispatchEvent(new CustomEvent("wwu-data", { detail: data }));
    } catch (err) {
      console.error(err);
      document.getElementById("results").textContent = err.message;
    }
  });
</script>
